# Test info

- Name: Unauthenticated Card Purchase Tests >> No Email Error
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:72:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: 'Fortsätt till kortbetalning' })

    at ShowPage.startPayment (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/ShowPage.ts:111:30)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:85:22
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:83:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - heading "Motel Destino" [level=1]
      - button "Åldersgräns ej bestämd"
      - text: 1 tim 55 min Thriller, Erotik
      - paragraph: "\"Motel Destino\" är en vågad, lekfull och uppfriskande variant av Postmannen ringer alltid två gånger. Jagad ung man hittar både gömställe och jobb på ett skumt motell i nordöstra Brasilien, och inleder genast även en sprängkåt affär med föreståndarinnan. Men när hennes fullblodspsykopat till man börjar ana oråd så tar det snart hus i helvete. Fotografesset Hélène Louvarts ursnygga 16mm-foto och den härligt neoniga produktionsdesignen lyfter denna lika festliga som obehagliga guldpalmsnominerade genrelek till ännu högre höjder."
      - heading "Regi" [level=2]
      - paragraph: Karim Aïnouz
      - heading "Skådespelare" [level=2]
      - paragraph: Fábio Assunção, Nataly Rocha, Iago Xavier
      - heading "Originaltitel" [level=2]
      - paragraph: Motel Destino
      - heading "Originalspråk" [level=2]
      - paragraph: Portugisiska
      - heading "Premiär" [level=2]
      - paragraph: 2025-07-25
      - heading "Åldersgräns" [level=2]
      - paragraph: Åldersgräns ej bestämd
      - text: Läs mer
      - button "Läs mer"
      - heading "Premiär fredag 25 juli 2025" [level=4]
      - heading "Biljetter" [level=2]
      - text: Föreställningarna är ännu inte släppta. Från och med 25 juli 2025 kommer de att finnas tillgängliga här, och då är du varmt välkommen tillbaka.
      - heading "Liknande filmer" [level=2]
      - list:
        - listitem:
          - img "Horizon Line"
          - img "Horizon Line"
          - link "Horizon Line":
            - /url: /film/horizon-line/
        - listitem:
          - img "Poltergeist - Klassiker"
          - img "Poltergeist - Klassiker"
          - link "Poltergeist - Klassiker":
            - /url: /film/poltergeist-klassiker/
        - listitem:
          - link "Seven 30-års jubileum - Klassiker":
            - /url: /film/seven-30-ars-jubileum-klassiker/
        - listitem:
          - img "Tenet"
          - img "Tenet"
          - link "Tenet":
            - /url: /film/tenet/
        - listitem:
          - img "The Secrets We Keep"
          - img "The Secrets We Keep"
          - link "The Secrets We Keep":
            - /url: /film/the-secrets-we-keep/
        - listitem:
          - img "Unhinged"
          - img "Unhinged"
          - link "Unhinged":
            - /url: /film/unhinged/
        - listitem:
          - link "Santosh":
            - /url: /film/santosh/
        - listitem:
          - link "The Accountant 2":
            - /url: /film/the-accountant-2/
    - listitem:
      - img "Motel Destino"
      - img "Motel Destino"
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: Navigated to Motel Destino
- button "Open chat":
  - img
```

# Test source

```ts
   11 |   private discountInfoButton: any;
   12 |   private discountCodeField: any;
   13 |   private discountActivateButton: any;
   14 |   private discountPopupButton: any;
   15 |   private noPaymentNeededButton: any;
   16 |   public amountOfTicketsLabel: any;
   17 |   public mainContentLocator: any;
   18 |   public discountCodeInfo: any;
   19 |   public formLocator: any;
   20 |   public salonInformationButton: any;
   21 |   public dialogLocator: any;
   22 |   public closeDialogButton: any;
   23 |
   24 |   constructor(page) {
   25 |     super(page);
   26 |     this.ticketStepper = this.page.locator('#stepper-inputfield_Ordinarie');
   27 |     this.emailField = this.page.getByPlaceholder('Fyll i din e-postadress');
   28 |     this.ageLimitCheckbox = this.page
   29 |       .locator('label')
   30 |       .filter({ hasText: 'Jag är medveten om att filmen' });
   31 |     this.secondAgeLimitCheckbox = this.page
   32 |       .locator('label')
   33 |       .filter({ hasText: 'Jag intygar att alla i sä' });
   34 |     this.paymentButton = this.page.getByRole('button', {
   35 |       name: 'Fortsätt till kortbetalning',
   36 |     });
   37 |     this.noPaymentNeededButton = this.page.getByRole('button', {
   38 |       name: 'Fortsätt',
   39 |     });
   40 |     this.removeTicketButton = this.page
   41 |       .locator(
   42 |         '//span[@class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   43 |       )
   44 |       .nth(0);
   45 |     this.addTicketButton = this.page
   46 |       .locator(
   47 |         '//span[@class="icomoon icon-expand-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   48 |       )
   49 |       .nth(0);
   50 |     this.discountInfoButton = this.page.getByRole('button', {
   51 |       name: ' Probem med rabattkoden',
   52 |     });
   53 |     this.discountCodeField = this.page.getByPlaceholder('Ange kod');
   54 |     this.discountActivateButton = this.page.getByRole('button', {
   55 |       name: 'Aktivera',
   56 |     });
   57 |     this.discountPopupButton = this.page.getByRole('button', {
   58 |       name: 'Lös in in rabattkod',
   59 |     });
   60 |     this.amountOfTicketsLabel = this.page.locator(
   61 |       "//div[@class='shrink-0 text-right font-bold']"
   62 |     );
   63 |     this.mainContentLocator = this.page.getByRole('main');
   64 |     this.discountCodeInfo = this.page.getByLabel('Probem med rabattkoden');
   65 |     this.formLocator = this.page.locator('form');
   66 |     this.salonInformationButton = this.page.getByRole('button', {
   67 |       name: 'Salongsinformation',
   68 |     });
   69 |     this.dialogLocator = this.page.getByRole('dialog');
   70 |     this.closeDialogButton = this.page.getByRole('button', { name: 'Stäng' });
   71 |   }
   72 |
   73 |   async selectOneTicket() {
   74 |     while ((await this.ticketStepper.inputValue()) !== '1') {
   75 |       await this.removeTicketButton.click();
   76 |       if ((await this.ticketStepper.inputValue()) === '0') {
   77 |         await this.addTicketButton.click();
   78 |       }
   79 |     }
   80 |   }
   81 |
   82 |   async openDiscountPopup() {
   83 |     await this.discountPopupButton.click();
   84 |   }
   85 |
   86 |   async expandDiscountInfo() {
   87 |     await this.discountInfoButton.click();
   88 |   }
   89 |
   90 |   async fillDiscountCode(discountCode: string) {
   91 |     await this.discountCodeField.fill(discountCode);
   92 |   }
   93 |
   94 |   async activateDiscountCode() {
   95 |     await this.discountActivateButton.click();
   96 |   }
   97 |
   98 |   async fillEmail(email) {
   99 |     await this.emailField.fill(email);
  100 |   }
  101 |
  102 |   async acceptAgeLimit() {
  103 |     if ((await this.ageLimitCheckbox.count()) > 0) {
  104 |       await this.ageLimitCheckbox.first().click();
  105 |     } else if ((await this.secondAgeLimitCheckbox.count()) > 0) {
  106 |       await this.secondAgeLimitCheckbox.first().click();
  107 |     }
  108 |   }
  109 |
  110 |   async startPayment() {
> 111 |     await this.paymentButton.click();
      |                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  112 |   }
  113 |
  114 |   async finishWithoutPaying() {
  115 |     await this.noPaymentNeededButton.click();
  116 |   }
  117 |
  118 |   async clickSalonInformationButton() {
  119 |     await this.salonInformationButton.click();
  120 |   }
  121 |
  122 |   async closeSalonInformationButton() {
  123 |     await this.closeDialogButton.click();
  124 |   }
  125 |
  126 |   async findShowWithSalonInformation(
  127 |     selectFirstAvailableShowtime: (
  128 |       selectRandomMovie: () => Promise<void>
  129 |     ) => Promise<void>,
  130 |     selectRandomMovie: () => Promise<void>
  131 |   ) {
  132 |     let salonInfoButtonCount = await this.salonInformationButton.count();
  133 |     while (salonInfoButtonCount === 0) {
  134 |       await selectFirstAvailableShowtime(selectRandomMovie);
  135 |       await this.page.waitForLoadState('networkidle');
  136 |       salonInfoButtonCount = await this.salonInformationButton.count();
  137 |     }
  138 |   }
  139 | }
  140 |
```