# Test info

- Name: Unauthenticated Card Purchase Tests >> Card purchase successful
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:33:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('div[class=\'group/poster\']').nth(1)

    at StartPage.selectRandomMovieMethod (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/StartPage.ts:45:46)
    at MoviePage.selectFirstAvailableShowtime (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/MoviePage.ts:22:13)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:41:7
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:39:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - 'heading "Rafael: det unga geniet" [level=1]'
      - button "Ingen åldersgräns"
      - text: 1 tim 22 min Konst, Biografi
      - paragraph:
        - strong: En film till ära av 500-årsdagen av konstnärens död. Låt dig fångas upp i renässansen anda och omvälvas av mästarens sublima konst.
      - paragraph: Rafael levde 1483 till 1520. Under den tiden lyckades han porträttera ett ideal av gudomlig skönhet.
      - paragraph: Dokumentären tar upp hans porträtt av kvinnor – Modern, Väninnan, Älskarinnan, Klienten – och hans explosiva sätt att uttrycka deras personligheter.
      - paragraph: Vi får höra om Rafaels mor Magia Ciarla, som dog när konstnären var bara åtta år gammal, hans många beundrarinnor som hjälpte honom på vägen, och kvinnan som sägs ha lett honom till hans död. Vi får se bilder av kvinnor som fanns runt honom i hans liv, men också av kvinnor som bara existerade i hans fantasi.
      - paragraph: Filmen visar oss runt bland de mest betydande platserna under tiden för en av de mest fantastiska av renässansens mästare.
      - heading "Regi" [level=2]
      - paragraph: Massimo Ferrari
      - heading "Medverkande" [level=2]
      - paragraph: Vincenzo Farinella, Lorenza Mochi Onori, Tom Henry, Gloria Fossi, Ippolita Di Majo, Amélie Ferrigno
      - heading "Originaltitel" [level=2]
      - paragraph: "Rafael: det unga geniet"
      - heading "Originalspråk" [level=2]
      - paragraph: Engelska, Italienska, Franska
      - heading "Premiär" [level=2]
      - paragraph: 2020-11-09
      - heading "Åldersgräns" [level=2]
      - paragraph:
        - strong: "Ingen åldersgräns:"
        - text: Får ses på bio av alla oavsett ålder.
      - text: Läs mer
      - button "Läs mer"
      - dialog
      - dialog
      - heading "Biljetter" [level=2]
      - radio "Idag 12 jul" [checked]
      - text: Idag 12 jul
      - radio "söndag 13 jul"
      - text: söndag 13 jul
      - radio "måndag 14 jul"
      - text: måndag 14 jul Biljetter till fler datum släpps på onsdag.
      - list:
        - listitem:
          - heading "Filmstaden Sergel" [level=2]
          - list:
            - listitem:
              - paragraph: Eng tal, Ita tal, Fra tal, Sve text
              - list:
                - listitem:
                  - link "12:00 Salong 3 196 av 196":
                    - /url: /bokning/kop/9a1e4ce7-5f0f-48e9-8588-de11053965e5/
                - listitem:
                  - link "14:07 Salong 3 196 av 196":
                    - /url: /bokning/kop/5541db7e-4b36-4b12-902b-4b34536585fa/
                - listitem:
                  - link "16:14 Salong 3 196 av 196":
                    - /url: /bokning/kop/1aca8e8b-acdc-4c1b-8142-3ccbd9765857/
                - listitem:
                  - link "18:21 Salong 3 196 av 196":
                    - /url: /bokning/kop/8eb3fecb-7e18-4553-ada4-460a857358fe/
                - listitem:
                  - link "20:28 Salong 3 196 av 196":
                    - /url: /bokning/kop/7acbfdd3-9ed8-439c-92c8-f397f28e01cd/
                - listitem:
                  - link "22:35 Salong 3 196 av 196":
                    - /url: /bokning/kop/6d771abb-0fbf-4547-b510-472daabcfc58/
          - heading "Nattvisning" [level=2]
          - paragraph: lördag 12 juli 22:42
          - checkbox "lör 12 jul"
          - text: lör 12 jul
      - heading "Liknande filmer" [level=2]
      - list:
        - listitem:
          - img "Leonardo Da Vinci - Louvren"
          - img "Leonardo Da Vinci - Louvren"
          - link "Leonardo Da Vinci - Louvren":
            - /url: /film/leonardo-da-vinci-louvren/
    - listitem:
      - 'img "Rafael: det unga geniet"'
      - 'img "Rafael: det unga geniet"'
      - 'img "Rafael: det unga geniet"'
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: "Navigated to Rafael: det unga geniet"
- button "Open chat":
  - img
```

# Test source

```ts
   1 | import { DefaultPageWithNavigation } from './DefaultPageWithNavigation';
   2 |
   3 | export class StartPage extends DefaultPageWithNavigation {
   4 |   private moviePosters: any;
   5 |   private movieSearchField: any;
   6 |   public mainContentLocator: any;
   7 |   public errorMessageMovieSearch: any;
   8 |
   9 |   constructor(page: any) {
  10 |     super(page);
  11 |     this.moviePosters = this.page.locator("div[class='group/poster']");
  12 |     this.movieSearchField = this.page.getByPlaceholder('Sök på filmens namn');
  13 |     this.mainContentLocator = this.page.getByRole('main');
  14 |     this.errorMessageMovieSearch = this.page.getByText('Ingen träff!Vi kunde inte');
  15 |   }
  16 |
  17 |   async selectTownFromResults(townName: string) {
  18 |     await this.page
  19 |       .locator('ul')
  20 |       .filter({ hasText: new RegExp(`^${townName}$`) })
  21 |       .getByRole('link')
  22 |       .click();
  23 |   }
  24 |
  25 |   async searchMovie(movieName: string) {
  26 |     await this.movieSearchField.fill(movieName);
  27 |   }
  28 |
  29 |   async getMovieTitleLink(movieName: string) {
  30 |     let locator = await this.page.getByRole('link', { name: movieName });
  31 |     return locator;
  32 |   }
  33 |
  34 |   async clickMovieLink(movieName: string) {
  35 |     await this.page.getByRole('link', { name: movieName }).click();
  36 |     await this.page.waitForLoadState('networkidle');
  37 |   }
  38 |
  39 |   async clearMovieSearchField() {
  40 |     await this.movieSearchField.fill('');
  41 |   }
  42 |
  43 |   async selectRandomMovie() {
  44 |     let randomMovie = Math.floor(Math.random() * 7);
> 45 |     await this.moviePosters.nth(randomMovie).click();
     |                                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  46 |     await this.page.waitForLoadState('networkidle');
  47 |     return randomMovie;
  48 |   }
  49 | }
  50 |
```