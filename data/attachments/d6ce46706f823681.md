# Test info

- Name: Unauthenticated Card Purchase Tests >> No Email Error
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:63:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: 'Fortsätt till kortbetalning' })

    at ShowPage.startPayment (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/ShowPage.ts:107:30)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:74:22
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:72:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - heading "Babyteeth" [level=1]
      - button "15+"
      - text: 1 tim 57 min
      - link "Komedi":
        - /url: /genre/komedifilmer/
      - text: Drama
      - paragraph: Millas föräldrar tror sig uppleva sin värsta mardröm när deras allvarligt sjuka dotter blir handlöst förälskad i den småkriminella Moses. Men i takt med att Millas kärlek till Moses växer återkommer hennes vilja att leva. Snart kommer hon visa alla i sin närhet hur man lever livet till fullo och det som till en början såg ut som en katastrof för familjen Finlay blir i stället början på något nytt. Milla visar dem alla hur underbart det är att inte vara död och hur långt vi alla kan gå för kärleken.
      - heading "Regi" [level=2]
      - paragraph: Shannon Murphy
      - heading "Skådespelare" [level=2]
      - paragraph: Ben Mendelsohn, Essie Davies, Toby Wallace, Eliza Scanlen
      - heading "Originaltitel" [level=2]
      - paragraph: Babyteeth
      - heading "Originalspråk" [level=2]
      - paragraph: Engelska
      - heading "Premiär" [level=2]
      - paragraph: 2020-09-18
      - heading "Åldersgräns" [level=2]
      - paragraph:
        - strong: "Från 15 år:"
        - text: Får ses på bio av barn som fyllt 11 år i sällskap med vuxen.
      - text: Läs mer
      - button "Läs mer"
      - dialog
      - dialog
      - heading "Biljetter" [level=2]
      - radio "Idag 1 sep" [checked]
      - text: Idag 1 sep Biljetter till fler datum släpps på onsdag.
      - list:
        - listitem:
          - heading "Grand Lidingö" [level=2]
          - list:
            - listitem:
              - paragraph: Eng tal, Sve text
              - list:
                - listitem:
                  - link "12:00 Salong 2 20 av 20":
                    - /url: /bokning/kop/440e03db-913e-4ec0-8222-338dcc77f9fe/
                - listitem:
                  - link "14:43 Salong 2 20 av 20":
                    - /url: /bokning/kop/08ba25f9-80b4-4c01-b6cb-df5b5f673e48/
                - listitem:
                  - link "17:26 Salong 2 20 av 20":
                    - /url: /bokning/kop/34e1edfb-1d52-4d49-9d06-96626f2d2413/
      - heading "Liknande filmer" [level=2]
      - list:
        - listitem:
          - img "Knives Out"
          - img "Knives Out"
          - link "Knives Out":
            - /url: /film/knives-out/
        - listitem:
          - img "La La Land"
          - img "La La Land"
          - link "La La Land":
            - /url: /film/la-la-land/
        - listitem:
          - img "Aquaman and the Lost Kingdom"
          - img "Aquaman and the Lost Kingdom"
          - link "Aquaman and the Lost Kingdom":
            - /url: /film/aquaman-and-the-lost-kingdom/
        - listitem:
          - img "Djuragenterna"
          - img "Djuragenterna"
          - link "Djuragenterna":
            - /url: /film/djuragenterna/
        - listitem:
          - img "Dolittle"
          - img "Dolittle"
          - link "Dolittle":
            - /url: /film/dolittle/
        - listitem:
          - img "Familjen Bigfoot"
          - img "Familjen Bigfoot"
          - link "Familjen Bigfoot":
            - /url: /film/familjen-bigfoot/
        - listitem:
          - img "Framåt"
          - img "Framåt"
          - link "Framåt":
            - /url: /film/framat/
        - listitem:
          - img "Goonies – Dödsskallegänget - Klassiker"
          - img "Goonies – Dödsskallegänget - Klassiker"
          - link "Goonies – Dödsskallegänget - Klassiker":
            - /url: /film/goonies-dodsskalleganget-klassiker/
    - listitem:
      - img "Babyteeth"
      - img "Babyteeth"
      - img "Babyteeth"
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: Navigated to Babyteeth
```

# Test source

```ts
   7 |   private secondAgeLimitCheckbox: any;
   8 |   private paymentButton: any;
   9 |   private removeTicketButton: any;
   10 |   private addTicketButton: any;
   11 |   private discountInfoButton: any;
   12 |   private discountCodeField: any;
   13 |   private discountActivateButton: any;
   14 |   private discountPopupButton: any;
   15 |   private noPaymentNeededButton: any;
   16 |   public amountOfTicketsLabel: any;
   17 |   public mainContentLocator: any;
   18 |   public discountCodeInfo: any;
   19 |   public formLocator: any;
   20 |   public salonInformationButton: any;
   21 |   public dialogLocator: any;
   22 |   public closeDialogButton: any;
   23 |
   24 |   constructor(page) {
   25 |     super(page);
   26 |     this.ticketStepper = this.page.locator('#stepper-inputfield_Ordinarie');
   27 |     this.emailField = this.page.getByPlaceholder('Fyll i din e-postadress');
   28 |     this.ageLimitCheckbox = this.page.locator('label').filter({ hasText: 'Jag är medveten om att filmen' });
   29 |     this.secondAgeLimitCheckbox = this.page.locator('label').filter({ hasText: 'Jag intygar att alla i sä' });
   30 |     this.paymentButton = this.page.getByRole('button', {
   31 |       name: 'Fortsätt till kortbetalning',
   32 |     });
   33 |     this.noPaymentNeededButton = this.page.getByRole('button', {
   34 |       name: 'Fortsätt',
   35 |     });
   36 |     this.removeTicketButton = this.page
   37 |       .locator(
   38 |         '//span[@class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   39 |       )
   40 |       .nth(0);
   41 |     this.addTicketButton = this.page
   42 |       .locator(
   43 |         '//span[@class="icomoon icon-expand-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   44 |       )
   45 |       .nth(0);
   46 |     this.discountInfoButton = this.page.getByRole('button', {
   47 |       name: ' Probem med rabattkoden',
   48 |     });
   49 |     this.discountCodeField = this.page.getByPlaceholder('Ange kod');
   50 |     this.discountActivateButton = this.page.getByRole('button', {
   51 |       name: 'Aktivera',
   52 |     });
   53 |     this.discountPopupButton = this.page.getByRole('button', {
   54 |       name: 'Lös in in rabattkod',
   55 |     });
   56 |     this.amountOfTicketsLabel = this.page.locator("//div[@class='shrink-0 text-right font-bold']");
   57 |     this.mainContentLocator = this.page.getByRole('main');
   58 |     this.discountCodeInfo = this.page.getByLabel('Probem med rabattkoden');
   59 |     this.formLocator = this.page.locator('form');
   60 |     this.salonInformationButton = this.page.getByRole('button', {
   61 |       name: 'Salongsinformation',
   62 |     });
   63 |     this.dialogLocator = this.page.locator(
   64 |       "(//div[contains(@class,'relative flex flex-col gap-24 rounded-2xl p-24 md:p-[2.5rem]')])[1]"
   65 |     );
   66 |     this.closeDialogButton = this.page.getByRole('button', { name: 'Stäng' });
   67 |   }
   68 |
   69 |   async selectOneTicket() {
   70 |     while ((await this.ticketStepper.inputValue()) !== '1') {
   71 |       await this.removeTicketButton.click();
   72 |       if ((await this.ticketStepper.inputValue()) === '0') {
   73 |         await this.addTicketButton.click();
   74 |       }
   75 |     }
   76 |   }
   77 |
   78 |   async openDiscountPopup() {
   79 |     await this.discountPopupButton.click();
   80 |   }
   81 |
   82 |   async expandDiscountInfo() {
   83 |     await this.discountInfoButton.click();
   84 |   }
   85 |
   86 |   async fillDiscountCode(discountCode: string) {
   87 |     await this.discountCodeField.fill(discountCode);
   88 |   }
   89 |
   90 |   async activateDiscountCode() {
   91 |     await this.discountActivateButton.click();
   92 |   }
   93 |
   94 |   async fillEmail(email) {
   95 |     await this.emailField.fill(email);
   96 |   }
   97 |
   98 |   async acceptAgeLimit() {
   99 |     if ((await this.ageLimitCheckbox.count()) > 0) {
  100 |       await this.ageLimitCheckbox.first().click();
  101 |     } else if ((await this.secondAgeLimitCheckbox.count()) > 0) {
  102 |       await this.secondAgeLimitCheckbox.first().click();
  103 |     }
  104 |   }
  105 |
  106 |   async startPayment() {
> 107 |     await this.paymentButton.click();
      |                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  108 |   }
  109 |
  110 |   async finishWithoutPaying() {
  111 |     await this.noPaymentNeededButton.click();
  112 |   }
  113 |
  114 |   async clickSalonInformationButton() {
  115 |     await this.salonInformationButton.click();
  116 |   }
  117 |
  118 |   async closeSalonInformationButton() {
  119 |     await this.closeDialogButton.click();
  120 |   }
  121 |
  122 |   async findShowWithSalonInformation(
  123 |     selectFirstAvailableShowtime: (selectRandomMovie: () => Promise<void>) => Promise<void>,
  124 |     selectRandomMovie: () => Promise<void>
  125 |   ) {
  126 |     let salonInfoButtonCount = await this.salonInformationButton.count();
  127 |     while (salonInfoButtonCount === 0) {
  128 |       await selectFirstAvailableShowtime(selectRandomMovie);
  129 |       await this.page.waitForLoadState('networkidle');
  130 |       salonInfoButtonCount = await this.salonInformationButton.count();
  131 |     }
  132 |   }
  133 | }
  134 |
```