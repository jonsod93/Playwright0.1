# Test info

- Name: Unauthenticated Card Purchase Tests >> No Email Error
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:72:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: 'Fortsätt till kortbetalning' })

    at ShowPage.startPayment (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/ShowPage.ts:111:30)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:85:22
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:83:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - heading "Goonies – Dödsskallegänget - Klassiker" [level=1]
      - button "11+"
      - text: 1 tim 54 min Äventyr,
      - link "Action":
        - /url: /genre/actionfilmer/
      - link "Komedi":
        - /url: /genre/komedifilmer/
      - paragraph: "\"Här händer det aldrig något\", säger Mikey, ledaren för Dödskallegänget. Han vet inte att han och hans sex kompisar snart kommer få mer än nog av spänning och mystik. Allt börjar när de hittar Enögde Willies skattkarta. De känner genast igen några viktiga landmärken och anar var skatten finns."
      - heading "Regi" [level=2]
      - paragraph: Richard Donner
      - heading "Skådespelare" [level=2]
      - paragraph: Sean Astin, Josh Brolin, Jeff Cohen, Corey Feldman, Kerri Green, Martha Plimpton, Jonathan Ke Quan, Anne Ramsey
      - heading "Originaltitel" [level=2]
      - paragraph: The Goonies
      - heading "Originalspråk" [level=2]
      - paragraph: Engelska
      - heading "Premiär" [level=2]
      - paragraph: 2020-08-14
      - heading "Åldersgräns" [level=2]
      - paragraph:
        - strong: "Från 11 år:"
        - text: Får ses på bio av barn som fyllt 7 år i sällskap med vuxen.
      - text: Läs mer
      - button "Läs mer"
      - dialog
      - dialog
      - heading "Biljetter" [level=2]
      - radio "Idag 18 jul" [checked]
      - text: Idag 18 jul
      - radio "lördag 19 jul"
      - text: lördag 19 jul
      - radio "söndag 20 jul"
      - text: söndag 20 jul
      - radio "måndag 21 jul"
      - text: måndag 21 jul Biljetter till fler datum släpps på onsdag.
      - list:
        - listitem:
          - heading "Filmstaden Scandinavia" [level=2]
          - list:
            - listitem:
              - paragraph: Eng tal, Sve text
              - list:
                - listitem:
                  - link "12:00 Salong 8 66 av 66":
                    - /url: /bokning/kop/0d477acc-877f-4b74-b072-57593245ea3e/
                - listitem:
                  - link "14:39 Salong 8 66 av 66":
                    - /url: /bokning/kop/446d8d95-7d69-4e97-8e18-05cf606242f3/
                - listitem:
                  - link "17:18 Salong 8 66 av 66":
                    - /url: /bokning/kop/93d64a91-10a1-4531-84c7-c278c7e76be4/
                - listitem:
                  - link "19:57 Salong 8 66 av 66":
                    - /url: /bokning/kop/0fad681c-5b2f-4e05-a09a-aced19401f2c/
                - listitem:
                  - link "22:36 Salong 8 66 av 66":
                    - /url: /bokning/kop/aa0b135f-0cdb-4493-b24c-e79fd9455234/
      - heading "Liknande filmer" [level=2]
      - list:
        - listitem:
          - img "Djuragenterna"
          - img "Djuragenterna"
          - link "Djuragenterna":
            - /url: /film/djuragenterna/
        - listitem:
          - img "Dolittle"
          - img "Dolittle"
          - link "Dolittle":
            - /url: /film/dolittle/
        - listitem:
          - img "Framåt"
          - img "Framåt"
          - link "Framåt":
            - /url: /film/framat/
        - listitem:
          - img "Frost 2"
          - img "Frost 2"
          - link "Frost 2":
            - /url: /film/frost-2/
        - listitem:
          - img "Mästerdetektiven Sherlock Gnomes"
          - img "Mästerdetektiven Sherlock Gnomes"
          - link "Mästerdetektiven Sherlock Gnomes":
            - /url: /film/masterdetektiven-sherlock-gnomes/
        - listitem:
          - 'img "Minioner: Berättelsen om Gru"'
          - 'img "Minioner: Berättelsen om Gru"'
          - 'link "Minioner: Berättelsen om Gru"':
            - /url: /film/minioner-berattelsen-om-gru/
        - listitem:
          - img "Operation Nordpolen"
          - img "Operation Nordpolen"
          - link "Operation Nordpolen":
            - /url: /film/operation-nordpolen/
        - listitem:
          - img "Röjar-Ralf kraschar internet"
          - img "Röjar-Ralf kraschar internet"
          - link "Röjar-Ralf kraschar internet":
            - /url: /film/rojar-ralf-kraschar-internet/
    - listitem:
      - dialog
      - img "Goonies – Dödsskallegänget - Klassiker"
      - button " Se trailer"
      - img "Goonies – Dödsskallegänget - Klassiker"
      - img "Goonies – Dödsskallegänget - Klassiker"
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: Navigated to Goonies – Dödsskallegänget - Klassiker
```

# Test source

```ts
   11 |   private discountInfoButton: any;
   12 |   private discountCodeField: any;
   13 |   private discountActivateButton: any;
   14 |   private discountPopupButton: any;
   15 |   private noPaymentNeededButton: any;
   16 |   public amountOfTicketsLabel: any;
   17 |   public mainContentLocator: any;
   18 |   public discountCodeInfo: any;
   19 |   public formLocator: any;
   20 |   public salonInformationButton: any;
   21 |   public dialogLocator: any;
   22 |   public closeDialogButton: any;
   23 |
   24 |   constructor(page) {
   25 |     super(page);
   26 |     this.ticketStepper = this.page.locator('#stepper-inputfield_Ordinarie');
   27 |     this.emailField = this.page.getByPlaceholder('Fyll i din e-postadress');
   28 |     this.ageLimitCheckbox = this.page
   29 |       .locator('label')
   30 |       .filter({ hasText: 'Jag är medveten om att filmen' });
   31 |     this.secondAgeLimitCheckbox = this.page
   32 |       .locator('label')
   33 |       .filter({ hasText: 'Jag intygar att alla i sä' });
   34 |     this.paymentButton = this.page.getByRole('button', {
   35 |       name: 'Fortsätt till kortbetalning',
   36 |     });
   37 |     this.noPaymentNeededButton = this.page.getByRole('button', {
   38 |       name: 'Fortsätt',
   39 |     });
   40 |     this.removeTicketButton = this.page
   41 |       .locator(
   42 |         '//span[@class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   43 |       )
   44 |       .nth(0);
   45 |     this.addTicketButton = this.page
   46 |       .locator(
   47 |         '//span[@class="icomoon icon-expand-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   48 |       )
   49 |       .nth(0);
   50 |     this.discountInfoButton = this.page.getByRole('button', {
   51 |       name: ' Probem med rabattkoden',
   52 |     });
   53 |     this.discountCodeField = this.page.getByPlaceholder('Ange kod');
   54 |     this.discountActivateButton = this.page.getByRole('button', {
   55 |       name: 'Aktivera',
   56 |     });
   57 |     this.discountPopupButton = this.page.getByRole('button', {
   58 |       name: 'Lös in in rabattkod',
   59 |     });
   60 |     this.amountOfTicketsLabel = this.page.locator(
   61 |       "//div[@class='shrink-0 text-right font-bold']"
   62 |     );
   63 |     this.mainContentLocator = this.page.getByRole('main');
   64 |     this.discountCodeInfo = this.page.getByLabel('Probem med rabattkoden');
   65 |     this.formLocator = this.page.locator('form');
   66 |     this.salonInformationButton = this.page.getByRole('button', {
   67 |       name: 'Salongsinformation',
   68 |     });
   69 |     this.dialogLocator = this.page.getByRole('dialog');
   70 |     this.closeDialogButton = this.page.getByRole('button', { name: 'Stäng' });
   71 |   }
   72 |
   73 |   async selectOneTicket() {
   74 |     while ((await this.ticketStepper.inputValue()) !== '1') {
   75 |       await this.removeTicketButton.click();
   76 |       if ((await this.ticketStepper.inputValue()) === '0') {
   77 |         await this.addTicketButton.click();
   78 |       }
   79 |     }
   80 |   }
   81 |
   82 |   async openDiscountPopup() {
   83 |     await this.discountPopupButton.click();
   84 |   }
   85 |
   86 |   async expandDiscountInfo() {
   87 |     await this.discountInfoButton.click();
   88 |   }
   89 |
   90 |   async fillDiscountCode(discountCode: string) {
   91 |     await this.discountCodeField.fill(discountCode);
   92 |   }
   93 |
   94 |   async activateDiscountCode() {
   95 |     await this.discountActivateButton.click();
   96 |   }
   97 |
   98 |   async fillEmail(email) {
   99 |     await this.emailField.fill(email);
  100 |   }
  101 |
  102 |   async acceptAgeLimit() {
  103 |     if ((await this.ageLimitCheckbox.count()) > 0) {
  104 |       await this.ageLimitCheckbox.first().click();
  105 |     } else if ((await this.secondAgeLimitCheckbox.count()) > 0) {
  106 |       await this.secondAgeLimitCheckbox.first().click();
  107 |     }
  108 |   }
  109 |
  110 |   async startPayment() {
> 111 |     await this.paymentButton.click();
      |                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  112 |   }
  113 |
  114 |   async finishWithoutPaying() {
  115 |     await this.noPaymentNeededButton.click();
  116 |   }
  117 |
  118 |   async clickSalonInformationButton() {
  119 |     await this.salonInformationButton.click();
  120 |   }
  121 |
  122 |   async closeSalonInformationButton() {
  123 |     await this.closeDialogButton.click();
  124 |   }
  125 |
  126 |   async findShowWithSalonInformation(
  127 |     selectFirstAvailableShowtime: (
  128 |       selectRandomMovie: () => Promise<void>
  129 |     ) => Promise<void>,
  130 |     selectRandomMovie: () => Promise<void>
  131 |   ) {
  132 |     let salonInfoButtonCount = await this.salonInformationButton.count();
  133 |     while (salonInfoButtonCount === 0) {
  134 |       await selectFirstAvailableShowtime(selectRandomMovie);
  135 |       await this.page.waitForLoadState('networkidle');
  136 |       salonInfoButtonCount = await this.salonInformationButton.count();
  137 |     }
  138 |   }
  139 | }
  140 |
```