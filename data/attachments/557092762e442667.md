# Test info

- Name: Unauthenticated Card Purchase Tests >> Card purchase successful
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:33:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('//span[@class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]').first()
    - locator resolved to <span class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"></span>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div class="flex h-[100vh] p-8 md:p-48 md:px-0 md:pb-0 md:pt-[2rem]">…</div> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
    - retrying click action
    - waiting 20ms
    - waiting for element to be visible, enabled and stable
    - element is visible, enabled and stable
    - scrolling into view if needed
    - done scrolling
    - <h3 class="text-md">Något gick fel</h3> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
  2 × retrying click action
      - waiting 100ms
      - waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div class="flex h-[100vh] p-8 md:p-48 md:px-0 md:pb-0 md:pt-[2rem]">…</div> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
  24 × retrying click action
       - waiting 500ms
       - waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <div class="flex h-[100vh] p-8 md:p-48 md:px-0 md:pb-0 md:pt-[2rem]">…</div> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
     - retrying click action
       - waiting 500ms
       - waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <h3 class="text-md">Något gick fel</h3> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
     - retrying click action
       - waiting 500ms
       - waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <div class="flex h-[100vh] p-8 md:p-48 md:px-0 md:pb-0 md:pt-[2rem]">…</div> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
     - retrying click action
       - waiting 500ms
       - waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <div class="flex h-[100vh] p-8 md:p-48 md:px-0 md:pb-0 md:pt-[2rem]">…</div> from <dialog open="" class="!block appearance-none transition-all duration-[0.25] backdrop:bg-weakest backdrop:opacity-70 dark">…</dialog> subtree intercepts pointer events
  - retrying click action
    - waiting 500ms
    - waiting for element to be visible, enabled and stable
    - element is visible, enabled and stable
    - scrolling into view if needed
    - done scrolling

    at ShowPage.selectOneTicket (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/ShowPage.ts:75:37)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:47:7
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:46:5
```

# Page snapshot

```yaml
- main:
  - link "Filmstaden logotype":
    - /url: /stockholm/
    - img "Filmstaden logotype"
  - 'heading "Rafael: det unga geniet" [level=1]'
  - text: Eng tal, Ita tal, Fra tal, Sve text I dag 13 aug, kl 12:00 Filmstaden Rigoletto, Salong 3
  - link "Logga in och samla poäng":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/bokning/kop/1daa2724-ad30-435b-ac18-03621457646b/
  - button ""
  - heading "Rubrik" [level=4]
  - paragraph: Nu kan du få det! Det enda du behöver göra är att köpa en biljett och bla bla bla bla bla bla och du har chans att vinna!
  - paragraph:
    - link "Läs mer om villkoren här":
      - /url: /familj/barnens-biodag-pa-filmstaden/
  - heading "Servering" [level=4]
  - paragraph: Njut en god drink eller en kall öl från vår barmeny medan du tittar på filmen. Kom ihåg att åldersgränsen för inträde är 18 år.
  - heading "Välj antal biljetter" [level=2]
  - paragraph: Ordinarie
  - button "-": 
  - spinbutton "Ordinarie" [disabled]: "2"
  - button "+": 
  - paragraph: Pensionär
  - paragraph: Pensionärserbjudande - 10% rabatt
  - button "-" [disabled]: 
  - spinbutton "Pensionär" [disabled]: "0"
  - button "+": 
  - dialog:
    - heading "Något gick fel" [level=3]
    - button ""
    - heading "Ett okänt fel uppstod när informationen skulle hämtas laddades." [level=5]
  - heading "Välj platser" [level=2]
  - text: Vi har förvalt de bästa platserna. Byt plats genom att dra markören.
  - img
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - checkbox
  - img
  - checkbox
  - checkbox "Välj skilda platser"
  - text: Välj skilda platser
  - img
  - text: Ditt val Ordinarie
  - img
  - text: Upptagen
  - img
  - text: Rullstol
  - button "Salongsinformation"
  - dialog
  - dialog
  - dialog
  - dialog
  - heading "Använd rabattkod" [level=2]
  - text: Rabatt- och biljettkoder, biokort samt biopasset.
  - button "Lös in in rabattkod"
  - dialog
  - heading "Biljettleverans" [level=2]
  - paragraph: För biljetter och bokningsbekräftelse.
  - text: Ange en e-postadress
  - textbox "Ange en e-postadress"
  - heading "Betalning" [level=2]
  - paragraph: All data krypteras
  - separator
  - heading "Använd presentkort" [level=3]
  - text: Har du ett presentkort? Använd den för ditt köp.
  - button "Lös in ditt presentkortsnummer"
  - separator
  - dialog
  - heading "Välj betalsätt" [level=3]
  - list:
    - listitem:
      - radio "Kort" [checked]
      - text: Kort
    - listitem:
      - radio "Swish"
      - text: Swish
  - separator
  - button "Fortsätt till kortbetalning"
  - paragraph:
    - text: Genom att fortsätta godkänner du
    - link "Filmstadens köpvillkor":
      - /url: /kundservice/fragor-och-svar/villkor-och-policies/filmstadens-kopvillkor/
    - text: .
  - paragraph:
    - text: Läs om hur vi värnar om din integritet i
    - link "Filmstadens personuppgiftspolicy":
      - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
  - dialog
  - dialog
- text: "Navigated to Rafael: det unga geniet"
```

# Test source

```ts
   1 | import { DefaultPageWithNavigation } from './DefaultPageWithNavigation';
   2 |
   3 | export class ShowPage extends DefaultPageWithNavigation {
   4 |   private ticketStepper: any;
   5 |   private emailField: any;
   6 |   private ageLimitCheckbox: any;
   7 |   private secondAgeLimitCheckbox: any;
   8 |   private paymentButton: any;
   9 |   private removeTicketButton: any;
   10 |   private addTicketButton: any;
   11 |   private discountInfoButton: any;
   12 |   private discountCodeField: any;
   13 |   private discountActivateButton: any;
   14 |   private discountPopupButton: any;
   15 |   private noPaymentNeededButton: any;
   16 |   public amountOfTicketsLabel: any;
   17 |   public mainContentLocator: any;
   18 |   public discountCodeInfo: any;
   19 |   public formLocator: any;
   20 |   public salonInformationButton: any;
   21 |   public dialogLocator: any;
   22 |   public closeDialogButton: any;
   23 |
   24 |   constructor(page) {
   25 |     super(page);
   26 |     this.ticketStepper = this.page.locator('#stepper-inputfield_Ordinarie');
   27 |     this.emailField = this.page.getByPlaceholder('Fyll i din e-postadress');
   28 |     this.ageLimitCheckbox = this.page
   29 |       .locator('label')
   30 |       .filter({ hasText: 'Jag är medveten om att filmen' });
   31 |     this.secondAgeLimitCheckbox = this.page
   32 |       .locator('label')
   33 |       .filter({ hasText: 'Jag intygar att alla i sä' });
   34 |     this.paymentButton = this.page.getByRole('button', {
   35 |       name: 'Fortsätt till kortbetalning',
   36 |     });
   37 |     this.noPaymentNeededButton = this.page.getByRole('button', {
   38 |       name: 'Fortsätt',
   39 |     });
   40 |     this.removeTicketButton = this.page
   41 |       .locator(
   42 |         '//span[@class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   43 |       )
   44 |       .nth(0);
   45 |     this.addTicketButton = this.page
   46 |       .locator(
   47 |         '//span[@class="icomoon icon-expand-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   48 |       )
   49 |       .nth(0);
   50 |     this.discountInfoButton = this.page.getByRole('button', {
   51 |       name: ' Probem med rabattkoden',
   52 |     });
   53 |     this.discountCodeField = this.page.getByPlaceholder('Ange kod');
   54 |     this.discountActivateButton = this.page.getByRole('button', {
   55 |       name: 'Aktivera',
   56 |     });
   57 |     this.discountPopupButton = this.page.getByRole('button', {
   58 |       name: 'Lös in in rabattkod',
   59 |     });
   60 |     this.amountOfTicketsLabel = this.page.locator(
   61 |       "//div[@class='shrink-0 text-right font-bold']"
   62 |     );
   63 |     this.mainContentLocator = this.page.getByRole('main');
   64 |     this.discountCodeInfo = this.page.getByLabel('Probem med rabattkoden');
   65 |     this.formLocator = this.page.locator('form');
   66 |     this.salonInformationButton = this.page.getByRole('button', {
   67 |       name: 'Salongsinformation',
   68 |     });
   69 |     this.dialogLocator = this.page.getByRole('dialog');
   70 |     this.closeDialogButton = this.page.getByRole('button', { name: 'Stäng' });
   71 |   }
   72 |
   73 |   async selectOneTicket() {
   74 |     while ((await this.ticketStepper.inputValue()) !== '1') {
>  75 |       await this.removeTicketButton.click();
      |                                     ^ Error: locator.click: Test timeout of 60000ms exceeded.
   76 |       if ((await this.ticketStepper.inputValue()) === '0') {
   77 |         await this.addTicketButton.click();
   78 |       }
   79 |     }
   80 |   }
   81 |
   82 |   async openDiscountPopup() {
   83 |     await this.discountPopupButton.click();
   84 |   }
   85 |
   86 |   async expandDiscountInfo() {
   87 |     await this.discountInfoButton.click();
   88 |   }
   89 |
   90 |   async fillDiscountCode(discountCode: string) {
   91 |     await this.discountCodeField.fill(discountCode);
   92 |   }
   93 |
   94 |   async activateDiscountCode() {
   95 |     await this.discountActivateButton.click();
   96 |   }
   97 |
   98 |   async fillEmail(email) {
   99 |     await this.emailField.fill(email);
  100 |   }
  101 |
  102 |   async acceptAgeLimit() {
  103 |     if ((await this.ageLimitCheckbox.count()) > 0) {
  104 |       await this.ageLimitCheckbox.first().click();
  105 |     } else if ((await this.secondAgeLimitCheckbox.count()) > 0) {
  106 |       await this.secondAgeLimitCheckbox.first().click();
  107 |     }
  108 |   }
  109 |
  110 |   async startPayment() {
  111 |     await this.paymentButton.click();
  112 |   }
  113 |
  114 |   async finishWithoutPaying() {
  115 |     await this.noPaymentNeededButton.click();
  116 |   }
  117 |
  118 |   async clickSalonInformationButton() {
  119 |     await this.salonInformationButton.click();
  120 |   }
  121 |
  122 |   async closeSalonInformationButton() {
  123 |     await this.closeDialogButton.click();
  124 |   }
  125 |
  126 |   async findShowWithSalonInformation(
  127 |     selectFirstAvailableShowtime: (
  128 |       selectRandomMovie: () => Promise<void>
  129 |     ) => Promise<void>,
  130 |     selectRandomMovie: () => Promise<void>
  131 |   ) {
  132 |     let salonInfoButtonCount = await this.salonInformationButton.count();
  133 |     while (salonInfoButtonCount === 0) {
  134 |       await selectFirstAvailableShowtime(selectRandomMovie);
  135 |       await this.page.waitForLoadState('networkidle');
  136 |       salonInfoButtonCount = await this.salonInformationButton.count();
  137 |     }
  138 |   }
  139 | }
  140 |
```