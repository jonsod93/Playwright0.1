# Test info

- Name: Unauthenticated Card Purchase Tests >> No Email Error
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:63:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: 'Fortsätt till kortbetalning' })

    at ShowPage.startPayment (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/ShowPage.ts:107:30)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:74:22
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:72:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - heading "The Naked Gun" [level=1]
      - button "11+"
      - text: 1 tim 25 min
      - link "Komedi":
        - /url: /genre/komedifilmer/
      - link "Action":
        - /url: /genre/actionfilmer/
      - paragraph: Bara en man har egenskaperna som krävs för att både leda Police Squad och samtidigt rädda världen.
      - heading "Regi" [level=2]
      - paragraph: Akiva Schaffer
      - heading "Skådespelare" [level=2]
      - paragraph: Liam Neeson, Pamela Anderson, Kevin Durand, Paul Walter Hauser, Danny Huston, Liza Koshy, Busta Rhymes, Michael Beasley
      - heading "Originaltitel" [level=2]
      - paragraph: The Naked Gun
      - heading "Originalspråk" [level=2]
      - paragraph: Engelska
      - heading "Premiär" [level=2]
      - paragraph: 2025-08-01
      - heading "Åldersgräns" [level=2]
      - paragraph:
        - strong: "Från 11 år:"
        - text: Får ses på bio av barn som fyllt 7 år i sällskap med vuxen.
      - text: Läs mer
      - button "Läs mer"
      - dialog
      - dialog
      - heading "Biljetter" [level=2]
      - radio "Idag 10 sep" [checked]
      - text: Idag 10 sep
      - radio "torsdag 11 sep"
      - text: torsdag 11 sep
      - radio "fredag 12 sep"
      - text: fredag 12 sep
      - radio "lördag 13 sep"
      - text: lördag 13 sep
      - radio "söndag 14 sep"
      - text: söndag 14 sep
      - radio "måndag 15 sep"
      - text: måndag 15 sep Biljetter till fler datum släpps på onsdag.
      - heading "Biografer" [level=3]
      - checkbox "Alla" [checked]
      - text: Alla
      - checkbox "Sergel"
      - text: Sergel
      - checkbox "Söder"
      - text: Söder
      - list:
        - listitem:
          - heading "Filmstaden Sergel" [level=2]
          - list:
            - listitem:
              - paragraph: Eng tal, Sve text
              - list:
                - listitem:
                  - link "12:00 Salong 8 107 av 109":
                    - /url: /bokning/kop/71b196c5-fd88-45c0-86ee-0c3f8daf98c5/
                - listitem:
                  - link "14:10 Salong 8 109 av 109":
                    - /url: /bokning/kop/21a149d7-aadd-49b8-9f11-7ac612260c34/
                - listitem:
                  - link "16:20 Salong 8 109 av 109":
                    - /url: /bokning/kop/a895cd4c-7679-4333-bd3e-6947ede19b83/
                - listitem:
                  - link "18:30 Salong 8 109 av 109":
                    - /url: /bokning/kop/dcdbefd1-0fb8-4509-a1e8-822255e127f7/
                - listitem:
                  - link "20:40 Salong 8 109 av 109":
                    - /url: /bokning/kop/9533714e-92cc-489e-ac6c-554bf1428eb9/
                - listitem:
                  - link "22:50 Salong 8 109 av 109":
                    - /url: /bokning/kop/7f056b5c-83bf-4ccd-b2b9-f3de739ec1fe/
      - list:
        - listitem:
          - heading "Filmstaden Söder (Tillfälligt stängd)" [level=2]
          - list:
            - listitem:
              - paragraph: Eng tal, Sve text
              - list:
                - listitem:
                  - link "12:00 Salong 8 105 av 105":
                    - /url: /bokning/kop/c797de3a-162c-4cc2-bdaf-872da0466019/
                - listitem:
                  - link "14:10 Salong 8 105 av 105":
                    - /url: /bokning/kop/5e5cee0b-845e-48e1-aa5f-4ada011be300/
                - listitem:
                  - link "16:20 Salong 8 105 av 105":
                    - /url: /bokning/kop/1c8720ab-0571-40fd-b342-e7f7cff1efa8/
                - listitem:
                  - link "18:30 Salong 8 105 av 105":
                    - /url: /bokning/kop/8cb4982c-e869-452e-aaa7-517c78fb99ad/
                - listitem:
                  - link "20:40 Salong 8 105 av 105":
                    - /url: /bokning/kop/93d2c511-fc20-4e73-b8cf-e407f734e769/
                - listitem:
                  - link "22:50 Salong 8 105 av 105":
                    - /url: /bokning/kop/2b95df12-2b80-49b9-ab25-322c243011c7/
      - heading "Liknande filmer" [level=2]
      - list:
        - listitem:
          - img "Bob Trevino Likes It"
          - img "Bob Trevino Likes It"
          - link "Bob Trevino Likes It":
            - /url: /film/bob-trevino-likes-it/
        - listitem:
          - 'img "Bridget Jones: Mad About the Boy"'
          - 'img "Bridget Jones: Mad About the Boy"'
          - 'link "Bridget Jones: Mad About the Boy"':
            - /url: /film/bridget-jones-mad-about-the-boy/
        - listitem:
          - img "Sitaare Zameen Par"
          - img "Sitaare Zameen Par"
          - link "Sitaare Zameen Par":
            - /url: /film/sitaare-zameen-par/
        - listitem:
          - img "Tesciowie 3"
          - img "Tesciowie 3"
          - link "Tesciowie 3":
            - /url: /film/tesciowie-3/
        - listitem:
          - link "The Dance Club":
            - /url: /film/the-dance-club/
        - listitem:
          - img "Roofman"
          - img "Roofman"
          - link "Roofman":
            - /url: /film/roofman/
        - listitem:
          - img "Bert sabbar allt"
          - img "Bert sabbar allt"
          - link "Bert sabbar allt":
            - /url: /film/bert-sabbar-allt/
        - listitem:
          - link "Bugonia":
            - /url: /film/bugonia/
    - listitem:
      - dialog
      - img "The Naked Gun"
      - button " Se trailer"
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
    - listitem:
      - link "Cookieinställningar":
        - /url: "#"
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: Navigated to The Naked Gun
```

# Test source

```ts
   7 |   private secondAgeLimitCheckbox: any;
   8 |   private paymentButton: any;
   9 |   private removeTicketButton: any;
   10 |   private addTicketButton: any;
   11 |   private discountInfoButton: any;
   12 |   private discountCodeField: any;
   13 |   private discountActivateButton: any;
   14 |   private discountPopupButton: any;
   15 |   private noPaymentNeededButton: any;
   16 |   public amountOfTicketsLabel: any;
   17 |   public mainContentLocator: any;
   18 |   public discountCodeInfo: any;
   19 |   public formLocator: any;
   20 |   public salonInformationButton: any;
   21 |   public dialogLocator: any;
   22 |   public closeDialogButton: any;
   23 |
   24 |   constructor(page) {
   25 |     super(page);
   26 |     this.ticketStepper = this.page.locator('#stepper-inputfield_Ordinarie');
   27 |     this.emailField = this.page.getByPlaceholder('Fyll i din e-postadress');
   28 |     this.ageLimitCheckbox = this.page.locator('label').filter({ hasText: 'Jag är medveten om att filmen' });
   29 |     this.secondAgeLimitCheckbox = this.page.locator('label').filter({ hasText: 'Jag intygar att alla i sä' });
   30 |     this.paymentButton = this.page.getByRole('button', {
   31 |       name: 'Fortsätt till kortbetalning',
   32 |     });
   33 |     this.noPaymentNeededButton = this.page.getByRole('button', {
   34 |       name: 'Fortsätt',
   35 |     });
   36 |     this.removeTicketButton = this.page
   37 |       .locator(
   38 |         '//span[@class="icomoon icon-collapse-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   39 |       )
   40 |       .nth(0);
   41 |     this.addTicketButton = this.page
   42 |       .locator(
   43 |         '//span[@class="icomoon icon-expand-solid  inline-block align-middle text-icon-size-40 w-[2.5rem] h-[2.5rem] leading-none"]'
   44 |       )
   45 |       .nth(0);
   46 |     this.discountInfoButton = this.page.getByRole('button', {
   47 |       name: ' Probem med rabattkoden',
   48 |     });
   49 |     this.discountCodeField = this.page.getByPlaceholder('Ange kod');
   50 |     this.discountActivateButton = this.page.getByRole('button', {
   51 |       name: 'Aktivera',
   52 |     });
   53 |     this.discountPopupButton = this.page.getByRole('button', {
   54 |       name: 'Lös in in rabattkod',
   55 |     });
   56 |     this.amountOfTicketsLabel = this.page.locator("//div[@class='shrink-0 text-right font-bold']");
   57 |     this.mainContentLocator = this.page.getByRole('main');
   58 |     this.discountCodeInfo = this.page.getByLabel('Probem med rabattkoden');
   59 |     this.formLocator = this.page.locator('form');
   60 |     this.salonInformationButton = this.page.getByRole('button', {
   61 |       name: 'Salongsinformation',
   62 |     });
   63 |     this.dialogLocator = this.page.locator(
   64 |       "(//div[contains(@class,'relative flex flex-col gap-24 rounded-2xl p-24 md:p-[2.5rem]')])[1]"
   65 |     );
   66 |     this.closeDialogButton = this.page.getByRole('button', { name: 'Stäng' });
   67 |   }
   68 |
   69 |   async selectOneTicket() {
   70 |     while ((await this.ticketStepper.inputValue()) !== '1') {
   71 |       await this.removeTicketButton.click();
   72 |       if ((await this.ticketStepper.inputValue()) === '0') {
   73 |         await this.addTicketButton.click();
   74 |       }
   75 |     }
   76 |   }
   77 |
   78 |   async openDiscountPopup() {
   79 |     await this.discountPopupButton.click();
   80 |   }
   81 |
   82 |   async expandDiscountInfo() {
   83 |     await this.discountInfoButton.click();
   84 |   }
   85 |
   86 |   async fillDiscountCode(discountCode: string) {
   87 |     await this.discountCodeField.fill(discountCode);
   88 |   }
   89 |
   90 |   async activateDiscountCode() {
   91 |     await this.discountActivateButton.click();
   92 |   }
   93 |
   94 |   async fillEmail(email) {
   95 |     await this.emailField.fill(email);
   96 |   }
   97 |
   98 |   async acceptAgeLimit() {
   99 |     if ((await this.ageLimitCheckbox.count()) > 0) {
  100 |       await this.ageLimitCheckbox.first().click();
  101 |     } else if ((await this.secondAgeLimitCheckbox.count()) > 0) {
  102 |       await this.secondAgeLimitCheckbox.first().click();
  103 |     }
  104 |   }
  105 |
  106 |   async startPayment() {
> 107 |     await this.paymentButton.click();
      |                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  108 |   }
  109 |
  110 |   async finishWithoutPaying() {
  111 |     await this.noPaymentNeededButton.click();
  112 |   }
  113 |
  114 |   async clickSalonInformationButton() {
  115 |     await this.salonInformationButton.click();
  116 |   }
  117 |
  118 |   async closeSalonInformationButton() {
  119 |     await this.closeDialogButton.click();
  120 |   }
  121 |
  122 |   async findShowWithSalonInformation(
  123 |     selectFirstAvailableShowtime: (selectRandomMovie: () => Promise<void>) => Promise<void>,
  124 |     selectRandomMovie: () => Promise<void>
  125 |   ) {
  126 |     let salonInfoButtonCount = await this.salonInformationButton.count();
  127 |     while (salonInfoButtonCount === 0) {
  128 |       await selectFirstAvailableShowtime(selectRandomMovie);
  129 |       await this.page.waitForLoadState('networkidle');
  130 |       salonInfoButtonCount = await this.salonInformationButton.count();
  131 |     }
  132 |   }
  133 | }
  134 |
```