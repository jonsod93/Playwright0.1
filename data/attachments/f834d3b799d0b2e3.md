# Test info

- Name: Discount code purchases >> Discountcode FR purchase + control the confirmation email
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/discountCodePurchase.spec.ts:42:3

# Error details

```
Error: Timed out 10000ms waiting for expect(locator).toContainText(expected)

Locator: getByRole('main')
Expected string: "0.00 kr"
Received string: "Utmärkt filmUnga kvinnorEng tal, Sve textI dag 25 jun, kl 12:00Filmstaden Kista, Salong 2Logga in och samla poängRubrikNu kan du få det! Det enda du behöver göra är att köpa en biljett och bla bla bla bla bla bla och du har chans att vinna!Läs mer om villkoren härVälj antal biljetterOrdinariePensionärPensionärserbjudande - 10% rabattVälj platserVi har förvalt de bästa platserna. Byt plats genom att dra markören.Valda platser:Rad 7 Plats 116Välj skilda platserDitt valOrdinarieUpptagenRullstolSalongsinformationAnvänd rabattkodRabatt- och biljettkoder, biokort samt biopasset.Lös in in rabattkodAnge rabattkod eller biobiljettkodLös in rabattkodRabatten hittades inteAvbrytAktiveraProbem med rabattkodenEndast ett erbjudande per biljett. Den förmånligaste rabatten väljs automatiskt. Inkluderar barn- och pensionärsrabatt samt medlemserbjudanden.BiobiljettBiobiljetten har 11 siffror eller 12 tecken som står nere i högra hörnet på din pappersbiljett. Har du fått en biljett via e-post eller SMS hittar du koden där. Om din pappersbiljett saknar streckkod i nedre vänstra hörnet går den tyvärr inte att använda för köp digitalt. Lös istället in den i kassan på biografen. Fribiljetter från Svenska Bio går inte heller att använda för köp digitalt. De löser du in mot en biobiljett i kassan på biografen.· RabattkortMed Rabattkortet köper du biljetter fär halva priset mån - tor.BiljettleveransFör biljetter och bokningsbekräftelse.Ange en e-postadressBetalningAll data krypterasAnvänd presentkortHar du ett presentkort? Använd den för ditt köp.Lös in ditt presentkortsnummerVälj betalsättKortSwishFortsätt till kortbetalningGenom att fortsätta godkänner du Filmstadens köpvillkor.Läs om hur vi värnar om din integritet i Filmstadens personuppgiftspolicySumma: 135.00 krVisa detaljerOrdinarie 1 st135.00 kr"
Call log:
  - expect.toContainText with timeout 10000ms
  - waiting for getByRole('main')
    14 × locator resolved to <main class="mx-auto flex w-full max-w-lg flex-col gap-y-64 px-12 lg:px-24">…</main>
       - unexpected value "Utmärkt filmUnga kvinnorEng tal, Sve textI dag 25 jun, kl 12:00Filmstaden Kista, Salong 2Logga in och samla poängRubrikNu kan du få det! Det enda du behöver göra är att köpa en biljett och bla bla bla bla bla bla och du har chans att vinna!Läs mer om villkoren härVälj antal biljetterOrdinariePensionärPensionärserbjudande - 10% rabattVälj platserVi har förvalt de bästa platserna. Byt plats genom att dra markören.Valda platser:Rad 7 Plats 116Välj skilda platserDitt valOrdinarieUpptagenRullstolSalongsinformationAnvänd rabattkodRabatt- och biljettkoder, biokort samt biopasset.Lös in in rabattkodAnge rabattkod eller biobiljettkodLös in rabattkodRabatten hittades inteAvbrytAktiveraProbem med rabattkodenEndast ett erbjudande per biljett. Den förmånligaste rabatten väljs automatiskt. Inkluderar barn- och pensionärsrabatt samt medlemserbjudanden.BiobiljettBiobiljetten har 11 siffror eller 12 tecken som står nere i högra hörnet på din pappersbiljett. Har du fått en biljett via e-post eller SMS hittar du koden där. Om din pappersbiljett saknar streckkod i nedre vänstra hörnet går den tyvärr inte att använda för köp digitalt. Lös istället in den i kassan på biografen. Fribiljetter från Svenska Bio går inte heller att använda för köp digitalt. De löser du in mot en biobiljett i kassan på biografen.  RabattkortMed Rabattkortet köper du biljetter fär halva priset mån - tor.BiljettleveransFör biljetter och bokningsbekräftelse.Ange en e-postadressBetalningAll data krypterasAnvänd presentkortHar du ett presentkort? Använd den för ditt köp.Lös in ditt presentkortsnummerVälj betalsättKortSwishFortsätt till kortbetalningGenom att fortsätta godkänner du Filmstadens köpvillkor.Läs om hur vi värnar om din integritet i Filmstadens personuppgiftspolicySumma: 135.00 krVisa detaljerOrdinarie 1 st135.00 kr"

    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/discountCodePurchase.spec.ts:98:49
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/discountCodePurchase.spec.ts:83:5
```

# Page snapshot

```yaml
- main:
  - link "Filmstaden logotype":
    - /url: /stockholm/
    - img "Filmstaden logotype"
  - text: Utmärkt film
  - heading "Unga kvinnor" [level=1]
  - text: Eng tal, Sve text I dag 25 jun, kl 12:00 Filmstaden Kista, Salong 2
  - link "Logga in och samla poäng":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/bokning/kop/ba240238-e86f-4016-b3e2-00282afa9f76/
  - button ""
  - heading "Rubrik" [level=4]
  - paragraph: Nu kan du få det! Det enda du behöver göra är att köpa en biljett och bla bla bla bla bla bla och du har chans att vinna!
  - paragraph:
    - link "Läs mer om villkoren här":
      - /url: /familj/barnens-biodag-pa-filmstaden/
  - heading "Välj antal biljetter" [level=2]
  - paragraph: Ordinarie
  - button "-": 
  - spinbutton "Ordinarie" [disabled]: "1"
  - button "+": 
  - paragraph: Pensionär
  - paragraph: Pensionärserbjudande - 10% rabatt
  - button "-" [disabled]: 
  - spinbutton "Pensionär" [disabled]: "0"
  - button "+": 
  - heading "Välj platser" [level=2]
  - text: "Vi har förvalt de bästa platserna. Byt plats genom att dra markören. Valda platser: Rad 7 Plats 116"
  - img
  - img
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - img
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - img
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - img
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - img
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - 'checkbox "Valda platser: Rad 7 Plats 116" [disabled]'
  - checkbox "Välj skilda platser"
  - text: Välj skilda platser
  - img
  - img
  - text: Ditt val Ordinarie
  - img
  - text: Upptagen
  - img
  - text: Rullstol
  - button "Salongsinformation"
  - dialog
  - dialog
  - dialog
  - dialog
  - heading "Använd rabattkod" [level=2]
  - text: Rabatt- och biljettkoder, biokort samt biopasset.
  - button "Lös in in rabattkod"
  - dialog:
    - heading "Ange rabattkod eller biobiljettkod" [level=3]
    - button ""
    - heading "Lös in rabattkod" [level=5]
    - text:  Rabatten hittades inte
    - textbox "Ange kod": FR
    - button "Avbryt" [disabled]
    - button "Aktivera" [disabled]:
      - img
      - text: Aktivera
    - button " Probem med rabattkoden" [expanded]
    - paragraph: Endast ett erbjudande per biljett. Den förmånligaste rabatten väljs automatiskt. Inkluderar barn- och pensionärsrabatt samt medlemserbjudanden.
    - heading "Biobiljett" [level=5]
    - paragraph: Biobiljetten har 11 siffror eller 12 tecken som står nere i högra hörnet på din pappersbiljett. Har du fått en biljett via e-post eller SMS hittar du koden där. Om din pappersbiljett saknar streckkod i nedre vänstra hörnet går den tyvärr inte att använda för köp digitalt. Lös istället in den i kassan på biografen. Fribiljetter från Svenska Bio går inte heller att använda för köp digitalt. De löser du in mot en biobiljett i kassan på biografen.
    - heading "Rabattkort" [level=5]
    - paragraph: Med Rabattkortet köper du biljetter fär halva priset mån - tor.
  - heading "Biljettleverans" [level=2]
  - paragraph: För biljetter och bokningsbekräftelse.
  - text: Ange en e-postadress
  - textbox "Ange en e-postadress": test.1750822203734chromiumFRpurchase@mk4soayafs1u.mailisk.net
  - heading "Betalning" [level=2]
  - paragraph: All data krypteras
  - separator
  - heading "Använd presentkort" [level=3]
  - text: Har du ett presentkort? Använd den för ditt köp.
  - button "Lös in ditt presentkortsnummer"
  - separator
  - dialog
  - heading "Välj betalsätt" [level=3]
  - list:
    - listitem:
      - radio "Kort" [checked]
      - text: Kort
    - listitem:
      - radio "Swish"
      - text: Swish
  - separator
  - button "Fortsätt till kortbetalning" [disabled]:
    - img
    - text: Fortsätt till kortbetalning
  - paragraph:
    - text: Genom att fortsätta godkänner du
    - link "Filmstadens köpvillkor":
      - /url: /kundservice/fragor-och-svar/villkor-och-policies/filmstadens-kopvillkor/
    - text: .
  - paragraph:
    - text: Läs om hur vi värnar om din integritet i
    - link "Filmstadens personuppgiftspolicy":
      - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
  - dialog
  - dialog
  - text: "Summa: 135.00 kr Ordinarie 1 st 135.00 kr"
- text: Navigated to Se Unga kvinnor på bio - Köp biobiljett online | Filmstaden
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { LandingPage } from '../../../pages/filmstaden_int/Landingpage';
   3 | import { StartPage } from '../../../pages/filmstaden_int/StartPage';
   4 | import { MoviePage } from '../../../pages/filmstaden_int/MoviePage';
   5 | import { ShowPage } from '../../../pages/filmstaden_int/ShowPage';
   6 | import { NetsPage } from '../../../pages/filmstaden_int/NetsPage';
   7 | import { ReceiptPage } from '../../../pages/filmstaden_int/ReceiptPage';
   8 | import { EmailHelper } from '../../../helpers/filmstaden_int/EmailHelper';
   9 | import { DiscountCodes } from '../../../testData/paymentOptions';
   10 | import { EnvironmentData } from '../../../testData/environmentData';
   11 | import * as allure from 'allure-js-commons';
   12 |
   13 | test.describe.parallel('Discount code purchases', () => {
   14 |   let landingPage;
   15 |   let startPage;
   16 |   let moviePage;
   17 |   let showPage;
   18 |   let netsPage;
   19 |   let receiptPage;
   20 |   let emailHelper;
   21 |   let testEmailAddress;
   22 |   let refNumber;
   23 |   let timeFrom;
   24 |   let namespace;
   25 |
   26 |   test.beforeEach(async ({ page }) => {
   27 |     landingPage = new LandingPage(page);
   28 |     startPage = new StartPage(page);
   29 |     moviePage = new MoviePage(page);
   30 |     showPage = new ShowPage(page);
   31 |     netsPage = new NetsPage(page);
   32 |     receiptPage = new ReceiptPage(page);
   33 |     emailHelper = new EmailHelper();
   34 |
   35 |     namespace = await emailHelper.getNamespace();
   36 |
   37 |     await page.goto('/');
   38 |     await landingPage.acceptCookies();
   39 |     await landingPage.selectStockholm();
   40 |   });
   41 |
   42 |   test('Discountcode FR purchase + control the confirmation email', async ({
   43 |     page,
   44 |   }, testInfo) => {
   45 |     await test.step('Initial setup of test specific variables and tags', async () => {
   46 |       await allure.epic('Purchases');
   47 |       await allure.feature('Successful full discount');
   48 |
   49 |       test.setTimeout(90000); // Set timeout to 90 seconds for the whole test
   50 |
   51 |       testEmailAddress =
   52 |         `test.${Date.now()}` +
   53 |         testInfo.project.name +
   54 |         `FRpurchase@${namespace}.mailisk.net`;
   55 |
   56 |       // Save the start time of the test
   57 |       let testStartTime = new Date();
   58 |       // Change start time format for the email filtering later
   59 |       timeFrom = Math.floor(testStartTime.getTime() / 1000); // Unix timestamp in seconds
   60 |     });
   61 |
   62 |     await test.step('Navigate to a movie with shows', async () => {
   63 |       await expect(startPage.loginButton).toBeVisible();
   64 |       await startPage.selectRandomMovie();
   65 |       await moviePage.selectFirstAvailableShowtime(
   66 |         startPage.selectRandomMovie.bind(startPage)
   67 |       );
   68 |     });
   69 |
   70 |     await test.step('Select 1 ticket and fill in necessary fields', async () => {
   71 |       //Make sure there are Ordinarie tickets available for sale
   72 |       await expect(async () => {
   73 |         await expect(showPage.mainContentLocator).toContainText('Ordinarie');
   74 |       }).toPass({ timeout: 10000 });
   75 |
   76 |       await showPage.selectOneTicket();
   77 |       //Double check to make sure the amount of tickets is 1
   78 |       await expect(showPage.amountOfTicketsLabel).toContainText('1 st');
   79 |       await showPage.fillEmail(testEmailAddress);
   80 |       await showPage.acceptAgeLimit();
   81 |     });
   82 |
   83 |     await test.step('Verify discount error message and add a correct discount code', async () => {
   84 |       await showPage.openDiscountPopup();
   85 |       await showPage.expandDiscountInfo();
   86 |       await expect(showPage.discountCodeInfo).toBeVisible();
   87 |       await expect(showPage.discountCodeInfo).toContainText(
   88 |         'Endast ett erbjudande per biljett'
   89 |       );
   90 |
   91 |       await showPage.fillDiscountCode(DiscountCodes.invalid.code);
   92 |       await showPage.activateDiscountCode();
   93 |       await expect(showPage.formLocator).toContainText(
   94 |         'Rabatten hittades inte'
   95 |       );
   96 |       await showPage.fillDiscountCode(DiscountCodes.free.code);
   97 |       await showPage.activateDiscountCode();
>  98 |       await expect(showPage.mainContentLocator).toContainText(
      |                                                 ^ Error: Timed out 10000ms waiting for expect(locator).toContainText(expected)
   99 |         DiscountCodes.free.pagePriceAfterDiscount
  100 |       );
  101 |       await expect(showPage.mainContentLocator).toContainText(
  102 |         'Ingen betalnings behövs. Njut av din filmupplevelse!'
  103 |       );
  104 |     });
  105 |
  106 |     await test.step('Finish the purchase and control tickets', async () => {
  107 |       await showPage.finishWithoutPaying();
  108 |       //Make sure you end up on the receipt page and save the reference number for email verification later
  109 |       await expect(receiptPage.referensNumberTitleLabel).toContainText(
  110 |         'Referensnummer'
  111 |       );
  112 |       refNumber = await receiptPage.getReferenceNumber();
  113 |       await receiptPage.clickShowTickets();
  114 |       await expect(receiptPage.mainContentLocator).toContainText(
  115 |         'Antal biobiljetter:'
  116 |       );
  117 |       await receiptPage.backToStart();
  118 |       await expect(receiptPage.mainContentLocator).toContainText(
  119 |         'Vilken film vill du se?'
  120 |       );
  121 |     });
  122 |
  123 |     await test.step('Verify the verification email', async () => {
  124 |       // Extract text content from email without HTML tags
  125 |       const emailContent = await emailHelper.getEmailContent(
  126 |         testEmailAddress,
  127 |         timeFrom,
  128 |         namespace
  129 |       );
  130 |       if (!emailContent) {
  131 |         throw new Error('Email content not found.');
  132 |       }
  133 |       // Check that the email contains the correct reference number and price
  134 |       await expect(emailContent).toContain(refNumber);
  135 |       await expect(emailContent).toContain(
  136 |         DiscountCodes.free.mailPriceAfterDiscount
  137 |       );
  138 |     });
  139 |   });
  140 | });
  141 |
```