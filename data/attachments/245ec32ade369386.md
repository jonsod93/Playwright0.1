# Test info

- Name: Unauthenticated Card Purchase Tests >> Card purchase successful
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:33:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('div[class=\'group/poster\']').nth(3)
    - locator resolved to <div class="group/poster">…</div>
  - attempting click action
    - waiting for element to be visible, enabled and stable
  - element was detached from the DOM, retrying

    at StartPage.selectRandomMovieMethod (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/StartPage.ts:45:46)
    at MoviePage.selectFirstAvailableShowtime (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/MoviePage.ts:22:13)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:41:7
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:39:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - heading "Stora stygga räven" [level=1]
      - button "Ingen åldersgräns"
      - text: 1 tim 23 min Tecknat, Barn, Familj
      - paragraph: "Från skaparna av Oscarsnominerade Victor & Josefine kommer en ny rolig och hjärtlig historia för hela familjen. Landsbygden är inte alltid så lugn och fridfull som man kan tro och djuren på den här gården är särskilt underliga: En räv som tar hand om en hel kycklingfamilj, en kanin som spelar stork och en anka som vill vara jultomten."
      - heading "Regi" [level=2]
      - paragraph: Benjamin Renner, Patrick Imbert
      - heading "Originaltitel" [level=2]
      - paragraph: Le grand méchant renard et autres contes ...
      - heading "Originalspråk" [level=2]
      - paragraph: Franska, Kinesiska
      - heading "Premiär" [level=2]
      - paragraph: 2018-12-14
      - heading "Åldersgräns" [level=2]
      - paragraph:
        - strong: "Ingen åldersgräns:"
        - text: Får ses på bio av alla oavsett ålder.
      - text: Läs mer
      - button "Läs mer"
      - dialog
      - dialog
      - heading "Biljetter" [level=2]
      - radio "Idag 25 jul" [checked]
      - text: Idag 25 jul
      - radio "lördag 26 jul"
      - text: lördag 26 jul
      - radio "söndag 27 jul"
      - text: söndag 27 jul
      - radio "måndag 28 jul"
      - text: måndag 28 jul Biljetter till fler datum släpps på onsdag.
      - list:
        - listitem:
          - heading "Filmstaden Kista" [level=2]
          - list:
            - listitem:
              - paragraph: Sve tal, Ej textad
              - list:
                - listitem:
                  - link "12:00 Salong 8 135 av 135":
                    - /url: /bokning/kop/f81eb14b-43a0-48ca-be5e-74644b4a0096/
                - listitem:
                  - link "14:08 Salong 8 135 av 135":
                    - /url: /bokning/kop/8d6708f9-f0e3-402d-ad9e-bfccfedff131/
                - listitem:
                  - link "16:16 Salong 8 135 av 135":
                    - /url: /bokning/kop/2043cbe6-09b5-4d98-9fe5-70c5d99a788e/
                - listitem:
                  - link "18:24 Salong 8 135 av 135":
                    - /url: /bokning/kop/24a61177-861f-4f15-a8fa-dc88d5dcc637/
                - listitem:
                  - link "20:32 Salong 8 135 av 135":
                    - /url: /bokning/kop/50556bb5-051c-49e9-a79e-6796688d2d7a/
                - listitem:
                  - link "22:40 Salong 8 135 av 135":
                    - /url: /bokning/kop/d05086be-5ab2-4bdb-98fc-95d875c52314/
    - listitem:
      - img "Stora stygga räven"
      - img "Stora stygga räven"
      - img "Stora stygga räven"
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: Navigated to Stora stygga räven
- button "Open chat":
  - img
```

# Test source

```ts
   1 | import { DefaultPageWithNavigation } from './DefaultPageWithNavigation';
   2 |
   3 | export class StartPage extends DefaultPageWithNavigation {
   4 |   private moviePosters: any;
   5 |   private movieSearchField: any;
   6 |   public mainContentLocator: any;
   7 |   public errorMessageMovieSearch: any;
   8 |
   9 |   constructor(page: any) {
  10 |     super(page);
  11 |     this.moviePosters = this.page.locator("div[class='group/poster']");
  12 |     this.movieSearchField = this.page.getByPlaceholder('Sök på filmens namn');
  13 |     this.mainContentLocator = this.page.getByRole('main');
  14 |     this.errorMessageMovieSearch = this.page.getByText('Ingen träff!Vi kunde inte');
  15 |   }
  16 |
  17 |   async selectTownFromResults(townName: string) {
  18 |     await this.page
  19 |       .locator('ul')
  20 |       .filter({ hasText: new RegExp(`^${townName}$`) })
  21 |       .getByRole('link')
  22 |       .click();
  23 |   }
  24 |
  25 |   async searchMovie(movieName: string) {
  26 |     await this.movieSearchField.fill(movieName);
  27 |   }
  28 |
  29 |   async getMovieTitleLink(movieName: string) {
  30 |     let locator = await this.page.getByRole('link', { name: movieName });
  31 |     return locator;
  32 |   }
  33 |
  34 |   async clickMovieLink(movieName: string) {
  35 |     await this.page.getByRole('link', { name: movieName }).click();
  36 |     await this.page.waitForLoadState('networkidle');
  37 |   }
  38 |
  39 |   async clearMovieSearchField() {
  40 |     await this.movieSearchField.fill('');
  41 |   }
  42 |
  43 |   async selectRandomMovie() {
  44 |     let randomMovie = Math.floor(Math.random() * 7);
> 45 |     await this.moviePosters.nth(randomMovie).click();
     |                                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  46 |     await this.page.waitForLoadState('networkidle');
  47 |     return randomMovie;
  48 |   }
  49 | }
  50 |
```