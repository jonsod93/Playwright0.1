# Test info

- Name: 2FA tests >> Create and delete account
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/loginAndSignUp/signUpFlow.spec.js:40:3

# Error details

```
Error: browserType.launch: Executable doesn't exist at /home/runner/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { LandingPage } from '../../../pages/filmstaden_int/Landingpage';
   3 | import { StartPage } from '../../../pages/filmstaden_int/StartPage';
   4 | import { LoginFlowPage } from '../../../pages/filmstaden_int/LoginFlowPage';
   5 | import { SignUpFlowPage } from '../../../pages/filmstaden_int/SignUpFlowPage';
   6 | import { ProfilePage } from '../../../pages/filmstaden_int/ProfilePage';
   7 | import { EmailHelper } from '../../../helpers/filmstaden_int/EmailHelper';
   8 | import { TestUserGeneric } from '../../../testData/testUser';
   9 | import { EnvironmentData } from '../../../testData/environmentData';
   10 | import * as allure from 'allure-js-commons';
   11 |
   12 | test.describe.parallel('2FA tests', () => {
   13 |   let landingPage;
   14 |   let startPage;
   15 |   let loginPage;
   16 |   let signUpPage;
   17 |   let profilePage;
   18 |   let emailHelper;
   19 |   let namespace;
   20 |   let socialSecurityNumber;
   21 |   let timeFrom;
   22 |   let testEmailAddress;
   23 |   const country = 'se';
   24 |
   25 |   test.beforeEach(async ({ page }) => {
   26 |     landingPage = new LandingPage(page);
   27 |     startPage = new StartPage(page);
   28 |     loginPage = new LoginFlowPage(page);
   29 |     signUpPage = new SignUpFlowPage(page);
   30 |     profilePage = new ProfilePage(page);
   31 |     emailHelper = new EmailHelper();
   32 |     namespace = await emailHelper.getNamespace();
   33 |
   34 |     await page.goto('/');
   35 |     await landingPage.acceptCookies();
   36 |     await landingPage.selectStockholm();
   37 |   });
   38 |
   39 |   // Tests the 2Factor sign up and deletion of account
>  40 |   test('Create and delete account', async ({ page, request }, testInfo) => {
      |   ^ Error: browserType.launch: Executable doesn't exist at /home/runner/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
   41 |     await test.step('Initial setup of variables and tags', async () => {
   42 |       await allure.epic('Login and Sign up');
   43 |       await allure.feature('Create and delete account');
   44 |       test.setTimeout(90000); // Set timeout to 90 seconds for the whole test
   45 |       // Save the start time of the test
   46 |       let testStartTime = new Date();
   47 |       timeFrom = Math.floor(testStartTime.getTime() / 1000); // Unix timestamp in seconds
   48 |       // Set the test email based on date and browser, making sure it's always unique for each test run and browser
   49 |       testEmailAddress = `test.${Date.now()}.${testInfo.project.name}.login@${namespace}.mailisk.net`;
   50 |     });
   51 |
   52 |     await test.step('Navigate to and start Sign Up Flow', async () => {
   53 |       await startPage.clickLogin();
   54 |       await loginPage.clickSignUpButton();
   55 |     });
   56 |
   57 |     await test.step('First signup step: Fill Email and verify with email code', async () => {
   58 |       await signUpPage.fillEmail(testEmailAddress);
   59 |       await signUpPage.clickSendCode();
   60 |       const code = await emailHelper.getSignUpCode(testEmailAddress, timeFrom, namespace);
   61 |       await signUpPage.fillCode(code);
   62 |       await signUpPage.clickVerifyCode();
   63 |     });
   64 |
   65 |     await test.step('Second signup step: Fill Password and Confirm Password', async () => {
   66 |       await signUpPage.fillPassword(TestUserGeneric.password);
   67 |       await signUpPage.fillConfirmPassword(TestUserGeneric.password);
   68 |       await signUpPage.clickContinue();
   69 |     });
   70 |
   71 |     await test.step('Third signup step: Provide the rest of user information and finish signup', async () => {
   72 |       await expect(page).toHaveURL('/skapa-konto/');
   73 |       await signUpPage.fillFirstName(TestUserGeneric.firstName);
   74 |       await signUpPage.fillLastName(TestUserGeneric.lastName);
   75 |       await signUpPage.fillPhoneNumber(TestUserGeneric.phoneNumber);
   76 |       socialSecurityNumber = await signUpPage.getSocialSecurityNumber();
   77 |       //socialSecurityNumber = "950103-1638"; // Hardcoded social security number for now
   78 |       await signUpPage.fillSSN(socialSecurityNumber);
   79 |       await signUpPage.acceptTerms();
   80 |       await signUpPage.acceptSubscription();
   81 |       await signUpPage.finishSignUpWithRetries();
   82 |
   83 |       // Make sure we end up on the profile page
   84 |       await expect(async () => {
   85 |         await expect(page).toHaveURL('/mina-sidor/');
   86 |       }).toPass();
   87 |     });
   88 |
   89 |     await test.step('Verify the QR-Code functionality', async () => {
   90 |       await profilePage.clickQR();
   91 |       await expect(profilePage.QRCodeInfoLocator).toBeVisible();
   92 |       await profilePage.closeQR();
   93 |     });
   94 |
   95 |     await test.step('Verify the profile accordion', async () => {
   96 |       await profilePage.clickProfileAccordion();
   97 |       await expect(profilePage.formContentLocator).toContainText('Återställ lösenord här');
   98 |       await expect(profilePage.formContentLocator).toContainText('Byt din e-postadress här');
   99 |       await expect(profilePage.savePhoneNumberButton).toContainText('Spara telefonnummer');
  100 |     });
  101 |
  102 |     await test.step('Verify the communication accordion', async () => {
  103 |       await profilePage.clickCommunicationAccordion();
  104 |       await expect(profilePage.communicationLabel).toContainText('Medlemsinformation och filmnyheter');
  105 |       await profilePage.uncheckReminders();
  106 |       await profilePage.uncheckCompetitions();
  107 |       await profilePage.uncheckTicketReleases();
  108 |       await profilePage.uncheckMembershipInfo();
  109 |       await expect(profilePage.membershipInformationCheckbox).not.toBeChecked();
  110 |       await expect(profilePage.ticketReleasesCheckbox).not.toBeChecked();
  111 |       await expect(profilePage.competitionsCheckbox).not.toBeChecked();
  112 |       await expect(profilePage.remindersCheckbox).not.toBeChecked();
  113 |     });
  114 |
  115 |     await test.step('Verify the friend accordion', async () => {
  116 |       await profilePage.clickFriendsAccordion();
  117 |       await profilePage.fillFriendCode('GF3UR2');
  118 |       await profilePage.fillFriendName('PhoxFake');
  119 |       await profilePage.clickAddFriend();
  120 |       await expect(page.getByLabel('Phoxfake')).not.toBeChecked();
  121 |     });
  122 |
  123 |     await test.step('Delete the account and verify that it is gone', async () => {
  124 |       // Save the userID and build the API URL for checking if the user exists
  125 |       let userID = await profilePage.getUserID();
  126 |       await expect(userID).toBeDefined();
  127 |       await expect(userID).toMatch(/^[A-Z0-9]{6}$/); // Example assertion to check the format
  128 |       const apiUrl = `https://inte-services.cinema-api.com/Preference/validatefriend/${country}?code=${userID}`;
  129 |
  130 |       // Cancel the membership
  131 |       await profilePage.clickCancelMembership();
  132 |       await expect(async () => {
  133 |         await expect(profilePage.cancelMembershipDialogLocator).toContainText(
  134 |           'Är du säker på att du vill avsluta medlemskap?'
  135 |         );
  136 |       }).toPass();
  137 |       await profilePage.clickConfirmCancel();
  138 |
  139 |       // Check that the user is deleted
  140 |       await expect(async () => {
```