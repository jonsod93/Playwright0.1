# Test info

- Name: Unauthenticated Card Purchase Tests >> Card purchase successful
- Location: /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:33:3

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('div[class=\'group/poster\']').nth(5)

    at StartPage.selectRandomMovieMethod (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/StartPage.ts:45:46)
    at MoviePage.selectFirstAvailableShowtime (/home/runner/work/Playwright0.1/Playwright0.1/pages/filmstaden_int/MoviePage.ts:22:13)
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:41:7
    at /home/runner/work/Playwright0.1/Playwright0.1/tests/filmstaden_int/purchases/cardPurchase.spec.js:39:5
```

# Page snapshot

```yaml
- navigation:
  - link "temp logotype":
    - /url: /stockholm/
    - img "temp logotype"
  - link "Upptäck":
    - /url: /stockholm/
  - button "Gå på bio "
  - link "Medlemsskapet":
    - /url: /medlem/
  - button "Mer "
  - link "Logga in menuitem logo Logga in":
    - /url: https://inte-services.cinema-api.com/redirect/externalSignUpOrIn/se?redirectUrl=https://sv-sit-marvel.filmstaden.se/mina-sidor/
    - text: Logga in
    - img "menuitem logo Logga in"
  - button "Stockholm"
- main:
  - list:
    - listitem:
      - heading "Stora stygga räven" [level=1]
      - button "Ingen åldersgräns"
      - text: 1 tim 23 min Tecknat, Barn, Familj
      - paragraph: "Från skaparna av Oscarsnominerade Victor & Josefine kommer en ny rolig och hjärtlig historia för hela familjen. Landsbygden är inte alltid så lugn och fridfull som man kan tro och djuren på den här gården är särskilt underliga: En räv som tar hand om en hel kycklingfamilj, en kanin som spelar stork och en anka som vill vara jultomten."
      - heading "Regi" [level=2]
      - paragraph: Benjamin Renner, Patrick Imbert
      - heading "Originaltitel" [level=2]
      - paragraph: Le grand méchant renard et autres contes ...
      - heading "Originalspråk" [level=2]
      - paragraph: Franska, Kinesiska
      - heading "Premiär" [level=2]
      - paragraph: 2018-12-14
      - heading "Åldersgräns" [level=2]
      - paragraph:
        - strong: "Ingen åldersgräns:"
        - text: Får ses på bio av alla oavsett ålder.
      - text: Läs mer
      - button "Läs mer"
      - dialog
      - dialog
      - heading "Biljetter" [level=2]
      - radio "Idag 21 jul" [checked]
      - text: Idag 21 jul
      - radio "tisdag 22 jul"
      - text: tisdag 22 jul
      - radio "onsdag 23 jul"
      - text: onsdag 23 jul
      - radio "torsdag 24 jul"
      - text: torsdag 24 jul
      - radio "fredag 25 jul"
      - text: fredag 25 jul
      - radio "lördag 26 jul"
      - text: lördag 26 jul
      - radio "söndag 27 jul"
      - text: söndag 27 jul
      - radio "måndag 28 jul"
      - text: måndag 28 jul Biljetter till fler datum släpps på onsdag.
      - heading "Biografer" [level=3]
      - checkbox "Alla" [checked]
      - text: Alla
      - checkbox "Heron City"
      - text: Heron City
      - checkbox "Kista"
      - text: Kista
      - list:
        - listitem:
          - heading "Filmstaden Heron City" [level=2]
          - list:
            - listitem:
              - paragraph: Sve tal, Ej textad
              - list:
                - listitem:
                  - link "12:00 Salong 7 125 av 125":
                    - /url: /bokning/kop/f7eb2696-fda2-483b-a80a-6768dc4a9e18/
                - listitem:
                  - link "14:08 Salong 7 125 av 125":
                    - /url: /bokning/kop/8ce1fa43-40ab-4449-86ec-cd447fb93c29/
                - listitem:
                  - link "16:16 Salong 7 125 av 125":
                    - /url: /bokning/kop/d9d0c048-1ee4-4b61-b447-65eb37931dc9/
                - listitem:
                  - link "18:24 Salong 7 125 av 125":
                    - /url: /bokning/kop/bf65dbfb-2432-438d-bd43-623a05c28f4d/
      - list:
        - listitem:
          - heading "Filmstaden Kista" [level=2]
          - list:
            - listitem:
              - paragraph: Sve tal, Ej textad
              - list:
                - listitem:
                  - link "20:32 Salong 8 135 av 135":
                    - /url: /bokning/kop/0db31940-0e93-447f-a601-ed7bfe293013/
                - listitem:
                  - link "22:40 Salong 8 135 av 135":
                    - /url: /bokning/kop/910e06f5-60fb-4a67-94bc-b3dd5d0b54b2/
    - listitem:
      - img "Stora stygga räven"
      - img "Stora stygga räven"
      - img "Stora stygga räven"
- contentinfo:
  - heading "Om oss" [level=2]
  - list:
    - listitem:
      - link "Jobba hos oss ":
        - /url: https://jobb.filmstaden.se/
    - listitem:
      - link "Press ":
        - /url: https://www.mynewsdesk.com/se/filmstaden-ab/
    - listitem:
      - link "Om Filmstaden":
        - /url: /kundservice/fragor-och-svar/fragor-och-svar/om-filmstaden/
    - listitem:
      - link "Filmpanelen":
        - /url: /filmpanelen/
    - listitem:
      - link "Alla våra biostäder":
        - /url: /alla-biostader/
    - listitem:
      - link "Alla våra biografer":
        - /url: /biografer/
  - heading "För företag" [level=2]
  - list:
    - listitem:
      - link "Företagsbiljetter":
        - /url: /foretagsbiljetter/
    - listitem:
      - link "Möten & Event ":
        - /url: https://moten.filmstaden.se/
    - listitem:
      - link "Bioreklam ":
        - /url: https://media.filmstaden.se/
    - listitem:
      - link "Föreningsbiljetten":
        - /url: /foreningsbiljetten/
  - heading "Hjälp & kontakt" [level=2]
  - list:
    - listitem:
      - link "Kundservice":
        - /url: /kundservice/fragor-och-svar/
    - listitem:
      - link "Tillgänglig bio":
        - /url: /tillganglig-bio/
    - listitem:
      - link "Personuppgiftspolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/personuppgiftspolicy/
    - listitem:
      - link "Cookiepolicy":
        - /url: /kundservice/fragor-och-svar/villkor-och-policies/cookiepolicy/
    - listitem:
      - link "Kontakta oss":
        - /url: /kundservice/kontakta-oss/
  - heading "Sociala medier" [level=2]
  - list:
    - listitem:
      - link "Instagram ":
        - /url: https://www.instagram.com/filmstaden_ab/
    - listitem:
      - link "Facebook ":
        - /url: https://www.facebook.com/filmstadenab
    - listitem:
      - link "LinkedIn ":
        - /url: https://se.linkedin.com/company/filmstaden
  - separator
  - img "Filmstaden logotype"
  - paragraph: Filmstaden ©2021. En del av Odeon Cinemas Group
- text: Navigated to Stora stygga räven
- button "Open chat":
  - img
```

# Test source

```ts
   1 | import { DefaultPageWithNavigation } from './DefaultPageWithNavigation';
   2 |
   3 | export class StartPage extends DefaultPageWithNavigation {
   4 |   private moviePosters: any;
   5 |   private movieSearchField: any;
   6 |   public mainContentLocator: any;
   7 |   public errorMessageMovieSearch: any;
   8 |
   9 |   constructor(page: any) {
  10 |     super(page);
  11 |     this.moviePosters = this.page.locator("div[class='group/poster']");
  12 |     this.movieSearchField = this.page.getByPlaceholder('Sök på filmens namn');
  13 |     this.mainContentLocator = this.page.getByRole('main');
  14 |     this.errorMessageMovieSearch = this.page.getByText('Ingen träff!Vi kunde inte');
  15 |   }
  16 |
  17 |   async selectTownFromResults(townName: string) {
  18 |     await this.page
  19 |       .locator('ul')
  20 |       .filter({ hasText: new RegExp(`^${townName}$`) })
  21 |       .getByRole('link')
  22 |       .click();
  23 |   }
  24 |
  25 |   async searchMovie(movieName: string) {
  26 |     await this.movieSearchField.fill(movieName);
  27 |   }
  28 |
  29 |   async getMovieTitleLink(movieName: string) {
  30 |     let locator = await this.page.getByRole('link', { name: movieName });
  31 |     return locator;
  32 |   }
  33 |
  34 |   async clickMovieLink(movieName: string) {
  35 |     await this.page.getByRole('link', { name: movieName }).click();
  36 |     await this.page.waitForLoadState('networkidle');
  37 |   }
  38 |
  39 |   async clearMovieSearchField() {
  40 |     await this.movieSearchField.fill('');
  41 |   }
  42 |
  43 |   async selectRandomMovie() {
  44 |     let randomMovie = Math.floor(Math.random() * 7);
> 45 |     await this.moviePosters.nth(randomMovie).click();
     |                                              ^ Error: locator.click: Test timeout of 60000ms exceeded.
  46 |     await this.page.waitForLoadState('networkidle');
  47 |     return randomMovie;
  48 |   }
  49 | }
  50 |
```